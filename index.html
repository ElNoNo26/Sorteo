<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SALE O SALE</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
<style>
    body { background-color: #0f172a; color: #f8fafc; font-family: 'Montserrat', sans-serif; }
    .gold-text { color: #fbbf24; text-shadow: 0 0 15px rgba(251, 191, 36, 0.5); }
    .ticket-cell { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; border-radius: 4px; font-size: 0.75rem; transition: transform 0.1s; border: 1px solid rgba(255,255,255,0.1); }
    .ticket-cell:active { transform: scale(0.95); }
    .free { background: rgba(16, 185, 129, 0.1); border-color: #10b981; color: #10b981; cursor: pointer; }
    .sold { background: rgba(239, 68, 68, 0.2); border-color: #ef4444; color: #ef4444; text-decoration: line-through; opacity: 0.5; pointer-events: none; }
    .reserved { background: rgba(245, 158, 11, 0.2); border-color: #f59e0b; color: #f59e0b; opacity: 0.8; pointer-events: none; }
    .selected { background: #3b82f6 !important; border-color: #60a5fa !important; color: white !important; box-shadow: 0 0 15px rgba(59, 130, 246, 0.5); transform: scale(1.05); }

    .modal-buy { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:50; display:none; align-items:center; justify-content:center; padding:20px; }
    
    /* Lightbox para ver fotos */
    .lightbox { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:100; display:none; align-items:center; justify-content:center; p-4; }
    .lightbox img { max-width:95%; max-height:90vh; border-radius:10px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }

    /* Bottom Cart Bar */
    .cart-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: #020617; border-top: 1px solid #334155; padding: 15px; display: none; align-items: center; justify-content: space-between; z-index: 40; box-shadow: 0 -5px 20px rgba(0,0,0,0.5); }
    .cart-bar.visible { display: flex; animation: slideUp 0.3s ease; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
</style>
</head>
<body class="pb-20"> <!-- Padding reducido -->
    
    <!-- HERO COMPACTO -->
    <div class="relative w-full h-40 sm:h-56 overflow-hidden shadow-2xl">
        <div class="absolute inset-0 z-0 bg-slate-900">
             <img src="https://raw.githubusercontent.com/ElNoNo26/El-NoNo/refs/heads/main/logo.webp" class="w-full h-full object-cover">
             <div class="absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/80 to-transparent"></div>
        </div>
        <div class="relative z-10 w-full h-full flex flex-col items-center justify-center text-center px-4">
            <div class="mb-0 w-full flex justify-center">
                <img src="https://raw.githubusercontent.com/ElNoNo26/Sorteo/main/uploads/img_1770414565940.webp" style="width: 80%; max-width: 500px; height: auto;" class="object-contain drop-shadow-xl animate-fade-in">
            </div>
        </div>
    </div>

    <!-- PREMIOS -->
    <div class="max-w-4xl mx-auto px-4 mt-2">
        <div class="text-center mb-4">
            <h2 class="text-xl font-black text-white italic uppercase tracking-wider inline-block border-b-2 border-yellow-500 pb-1">
                ¬°MIR√Å LO QUE POD√âS GANAR! üéâ
            </h2>
        </div>
        <div class="grid grid-cols-2 gap-3 sm:gap-4">
            
                <div class="relative bg-slate-900 border border-yellow-500/30 rounded-lg overflow-hidden group">
                    <div class="absolute top-0 w-full bg-yellow-500 text-black font-bold text-[0.6rem] uppercase py-1 text-center shadow-md z-10 truncate px-2">
                        1¬∞ PREMIO
                    </div>
                    <div class="h-32 bg-black mt-5 cursor-zoom-in relative" onclick="viewImg('https://image2url.com/r2/default/images/1770411314646-b6fdcff5-5d8c-4ddc-a996-eace7c4c9173.jpg')">
                        <img src="https://image2url.com/r2/default/images/1770411314646-b6fdcff5-5d8c-4ddc-a996-eace7c4c9173.jpg" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition">
                        <div class="absolute bottom-1 right-1 bg-black/60 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-sm flex items-center gap-1">
                            üîç Ver foto
                        </div>
                    </div>
                    <div class="p-2 text-center bg-slate-900">
                        <h3 class="text-white font-bold text-xs uppercase leading-tight truncate">Mesita Plegable</h3>
                    </div>
                </div>
            
                <div class="relative bg-slate-900 border border-yellow-500/30 rounded-lg overflow-hidden group">
                    <div class="absolute top-0 w-full bg-yellow-500 text-black font-bold text-[0.6rem] uppercase py-1 text-center shadow-md z-10 truncate px-2">
                        2¬∞ PREMIO
                    </div>
                    <div class="h-32 bg-black mt-5 cursor-zoom-in relative" onclick="viewImg('https://image2url.com/r2/default/images/1770399980619-afdbc503-82a8-40b6-b745-9f3d7e8f158f.png')">
                        <img src="https://image2url.com/r2/default/images/1770399980619-afdbc503-82a8-40b6-b745-9f3d7e8f158f.png" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition">
                        <div class="absolute bottom-1 right-1 bg-black/60 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-sm flex items-center gap-1">
                            üîç Ver foto
                        </div>
                    </div>
                    <div class="p-2 text-center bg-slate-900">
                        <h3 class="text-white font-bold text-xs uppercase leading-tight truncate">Organizador</h3>
                    </div>
                </div>
            
        </div>
    </div>

    <!-- NUMEROS -->
    <div class="max-w-3xl mx-auto px-2 mt-4">
        <div class="bg-slate-800/50 backdrop-blur-sm p-4 rounded-2xl border border-slate-700/50 shadow-lg">
            
            <!-- HEADER DE NUMEROS CON PRECIO VISIBLE -->
            <div class="flex justify-between items-end mb-6 px-2 border-b border-gray-600/50 pb-4">
                <div>
                    <h2 class="text-xl font-black text-white uppercase leading-none">Elige tus</h2>
                    <h2 class="text-xl font-black text-yellow-500 uppercase leading-none">N√∫meros</h2>
                </div>
                <div class="flex flex-col items-end">
                    <span class="text-xs text-gray-400 uppercase font-bold">Valor</span>
                    <span class="text-4xl font-black text-green-400 drop-shadow-lg" style="text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);">$1000</span>
                </div>
            </div>

            <div class="grid grid-cols-10 gap-1 sm:gap-2">
                <div class="ticket-cell sold" >01</div><div class="ticket-cell sold" >02</div><div class="ticket-cell sold" >03</div><div class="ticket-cell free" onclick="toggleTicket('04', this)">04</div><div class="ticket-cell free" onclick="toggleTicket('05', this)">05</div><div class="ticket-cell free" onclick="toggleTicket('06', this)">06</div><div class="ticket-cell sold" >07</div><div class="ticket-cell sold" >08</div><div class="ticket-cell free" onclick="toggleTicket('09', this)">09</div><div class="ticket-cell sold" >10</div><div class="ticket-cell sold" >11</div><div class="ticket-cell sold" >12</div><div class="ticket-cell sold" >13</div><div class="ticket-cell sold" >14</div><div class="ticket-cell sold" >15</div><div class="ticket-cell free" onclick="toggleTicket('16', this)">16</div><div class="ticket-cell sold" >17</div><div class="ticket-cell free" onclick="toggleTicket('18', this)">18</div><div class="ticket-cell sold" >19</div><div class="ticket-cell sold" >20</div><div class="ticket-cell sold" >21</div><div class="ticket-cell sold" >22</div><div class="ticket-cell sold" >23</div><div class="ticket-cell free" onclick="toggleTicket('24', this)">24</div><div class="ticket-cell sold" >25</div><div class="ticket-cell free" onclick="toggleTicket('26', this)">26</div><div class="ticket-cell sold" >27</div><div class="ticket-cell sold" >28</div><div class="ticket-cell sold" >29</div><div class="ticket-cell free" onclick="toggleTicket('30', this)">30</div><div class="ticket-cell sold" >31</div><div class="ticket-cell free" onclick="toggleTicket('32', this)">32</div><div class="ticket-cell sold" >33</div><div class="ticket-cell free" onclick="toggleTicket('34', this)">34</div><div class="ticket-cell free" onclick="toggleTicket('35', this)">35</div><div class="ticket-cell free" onclick="toggleTicket('36', this)">36</div><div class="ticket-cell sold" >37</div><div class="ticket-cell free" onclick="toggleTicket('38', this)">38</div><div class="ticket-cell free" onclick="toggleTicket('39', this)">39</div><div class="ticket-cell free" onclick="toggleTicket('40', this)">40</div><div class="ticket-cell free" onclick="toggleTicket('41', this)">41</div><div class="ticket-cell free" onclick="toggleTicket('42', this)">42</div><div class="ticket-cell free" onclick="toggleTicket('43', this)">43</div><div class="ticket-cell free" onclick="toggleTicket('44', this)">44</div><div class="ticket-cell free" onclick="toggleTicket('45', this)">45</div><div class="ticket-cell free" onclick="toggleTicket('46', this)">46</div><div class="ticket-cell free" onclick="toggleTicket('47', this)">47</div><div class="ticket-cell free" onclick="toggleTicket('48', this)">48</div><div class="ticket-cell free" onclick="toggleTicket('49', this)">49</div><div class="ticket-cell free" onclick="toggleTicket('50', this)">50</div>
            </div>
            
            <div class="flex justify-center gap-4 text-[10px] mt-4 font-bold uppercase text-gray-400">
                <span class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-emerald-500"></div> Libre</span>
                <span class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-red-500"></div> Vendido</span>
                <span class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-blue-500"></div> Tu selecci√≥n</span>
            </div>
        </div>
    </div>

    <!-- INFO PAGO COMPACTA CON TELEFONO -->
    <div class="max-w-md mx-auto px-4 mt-4 text-center pb-0">
        <div class="bg-indigo-900/30 border border-indigo-500/20 p-4 rounded-xl">
            <p class="text-indigo-300 text-[10px] uppercase font-bold mb-1">ALIAS / CBU</p>
            <p class="text-lg font-mono text-white select-all bg-black/20 py-2 rounded mb-2">gra.salas23</p>
            
            <div class="flex flex-col items-center gap-2 mt-4">
                <button id="btnSendVoucher" class="bg-green-600 text-white text-xs font-bold px-6 py-3 rounded-full shadow hover:bg-green-500 transition w-full max-w-[250px] uppercase tracking-wide">
                    üì§ Enviar comprobante
                </button>
            </div>
        </div>
    </div>

    <footer class="text-center py-4 text-xs text-gray-500 font-bold tracking-widest mt-2 mb-16">
        ¬°Gracias por participar!
    </footer>

    <!-- CART BAR (Fixed Bottom) -->
    <div id="cartBar" class="cart-bar">
        <div class="flex flex-col">
            <span class="text-gray-400 text-xs uppercase font-bold">Total a pagar</span>
            <span id="cartTotal" class="text-white text-xl font-black font-mono">$0</span>
        </div>
        <button onclick="openFinalModal()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-6 rounded-lg uppercase shadow-lg shadow-blue-500/30 transition">
            COMPRAR <span id="cartCount" class="bg-white text-blue-600 px-2 py-0.5 rounded-full text-xs ml-1">0</span>
        </button>
    </div>

    <!-- MODAL FINAL -->
    <div id="buyModal" class="modal-buy" onclick="if(event.target === this) this.style.display='none'">
        <div class="bg-slate-900 p-6 rounded-2xl max-w-xs w-full border border-blue-500 text-center relative shadow-2xl overflow-hidden">
            <!-- Glow background effect -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-blue-500/20 blur-3xl rounded-full pointer-events-none"></div>
            
            <button onclick="document.getElementById('buyModal').style.display='none'" class="absolute top-2 right-4 text-2xl text-gray-500 hover:text-white z-10">√ó</button>
            
            <div class="text-6xl mb-4 relative z-10 animate-pulse">üéüÔ∏è‚ú®</div>
            
            <h3 class="text-lg font-bold text-gray-300 mb-1 uppercase">N√∫meros seleccionados</h3>
            <div id="modalNumsList" class="text-white font-black text-xl mb-4 break-words"></div>
            
            <div class="bg-black/30 p-3 rounded-lg border border-white/10 mb-6">
                <p class="text-gray-400 text-xs uppercase mb-1">Total a pagar</p>
                <p id="modalPrice" class="text-4xl font-black text-green-400 font-mono tracking-tight"></p>
            </div>
            
            <button id="btnWa" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3.5 rounded-xl shadow-lg transition uppercase text-sm tracking-wide flex items-center justify-center gap-2">
                <span>üí¨</span> PEDIR POR WHATSAPP
            </button>
        </div>
    </div>

    <!-- LIGHTBOX FOTOS -->
    <div id="imgLightbox" class="lightbox" onclick="this.style.display='none'">
        <img id="imgFull" src="" alt="Premio Full">
    </div>

    <script>
        // LOGICA DE CARRITO Y SELECCION
        const ticketPrice = 1000;
        
        // Whatsapp Link Logic (AUTO +549)
        const waClean = "1166631401".replace(/[^0-9]/g, '');
        const waFinal = '549' + waClean; 

        // Boton Enviar Comprobante (Con Mensaje)
        document.getElementById('btnSendVoucher').onclick = function() {
             const msgVoucher = encodeURIComponent("Hola! Aqu√≠ env√≠o el comprobante de pago.");
             window.open("https://wa.me/" + waFinal + "?text=" + msgVoucher, '_blank');
        };

        let selectedNumbers = new Set();

        function toggleTicket(num, element) {
            // Si esta vendido o reservado, no hacer nada
            if(element.classList.contains('sold') || element.classList.contains('reserved')) return;

            if(selectedNumbers.has(num)) {
                selectedNumbers.delete(num);
                element.classList.remove('selected');
            } else {
                selectedNumbers.add(num);
                element.classList.add('selected');
            }
            updateCart();
        }

        function updateCart() {
            const count = selectedNumbers.size;
            const bar = document.getElementById('cartBar');
            
            if(count > 0) {
                bar.classList.add('visible');
                document.getElementById('cartCount').innerText = count;
                document.getElementById('cartTotal').innerText = '$' + (count * ticketPrice).toLocaleString();
            } else {
                bar.classList.remove('visible');
            }
        }

        function openFinalModal() {
            const nums = Array.from(selectedNumbers).sort((a,b) => parseInt(a)-parseInt(b));
            const total = nums.length * ticketPrice;
            
            document.getElementById('modalNumsList').innerText = nums.join(', ');
            document.getElementById('modalPrice').innerText = '$' + total.toLocaleString();
            
            // Link de WhatsApp CON TOTAL
            const msg = encodeURIComponent(`Hola! Quiero reservar los n√∫meros: ${nums.join(', ')}. Total a pagar: $${total}`);
            const link = "https://wa.me/" + waFinal + "?text=" + msg;
            
            document.getElementById('btnWa').onclick = function() { window.open(link, '_blank'); };
            document.getElementById('buyModal').style.display = 'flex';
        }
        
        function viewImg(url) {
            document.getElementById('imgFull').src = url;
            document.getElementById('imgLightbox').style.display = 'flex';
        }
    </script>
</body>
</html>
    